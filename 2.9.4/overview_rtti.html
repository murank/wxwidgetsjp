<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>wxWidgets: wxWidgets: Runtime Type Information (RTTI)</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom_stylesheet.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery-1.3.2.min.js"></script>

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="width: 100%;">
 <tbody>
 <tr>
  
  <td id="projectlogo"><a href="http://www.wxwidgets.org/" target="_new"><img alt="Logo" src="logo.png"/></a></td>
  
  <td style="padding: 0.5em; text-align: right;">
   <span id="projectnumber">Version: 2.9.4</span>
  </td>
  
 </tr>
 </tbody>
</table>
</div><!-- Generated by Doxygen 1.7.4 -->


<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>メインページ</span></a></li>
      <li class="current"><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>カテゴリ</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li><a href="files.html"><span>ファイル</span></a></li>
      <li><a href="dirs.html"><span>ディレクトリ</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">ドキュメント</a>      </li>
      <li class="navelem"><a class="el" href="page_topics.html">トピックスの概要</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Runtime Type Information (RTTI)  </div>  </div>
</div>
<div class="contents">
<div class="textblock"><ul>
<li><a class="el" href="overview_rtti.html#overview_rtti_intro">イントロダクション</a> </li>
<li><a class="el" href="overview_rtti.html#overview_rtti_classinfo">wxClassInfo</a> </li>
<li><a class="el" href="overview_rtti.html#overview_rtti_example">Example</a></li>
</ul>
<dl class="see"><dt><b>参照:</b></dt><dd></dd></dl>
<ul>
<li><a class="el" href="classwx_object.html" title="This is the root class of many of the wxWidgets classes.">wxObject</a> </li>
<li><a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a></li>
</ul>
<hr/>
<h2><a class="anchor" id="overview_rtti_intro"></a>
イントロダクション</h2>
<p>One of the failings of C++ used to be that no runtime information was provided about a class and its position in the inheritance hierarchy. Another, which still persists, is that instances of a class cannot be created just by knowing the name of a class, which makes facilities such as persistent storage hard to implement.</p>
<p>Most C++ GUI frameworks overcome these limitations by means of a set of macros and functions and wxWidgets is no exception. As it originated before the addition of RTTI to the C++ standard and as support for it is still missing from some (albeit old) compilers, wxWidgets doesn't (yet) use it, but provides its own macro-based RTTI system.</p>
<p>In the future, the standard C++ RTTI will be used though and you're encouraged to use whenever possible the wxDynamicCast macro which, for the implementations that support it, is defined just as dynamic_cast and uses wxWidgets RTTI for all the others. This macro is limited to wxWidgets classes only and only works with pointers (unlike the real dynamic_cast which also accepts references).</p>
<p>Each class that you wish to be known to the type system should have a macro such as DECLARE_DYNAMIC_CLASS just inside the class declaration. The macro IMPLEMENT_DYNAMIC_CLASS should be in the implementation file. Note that these are entirely optional; use them if you wish to check object types, or create instances of classes using the class name. However, it is good to get into the habit of adding these macros for all classes.</p>
<p>Variations on these macros are used for multiple inheritance, and abstract classes that cannot be instantiated dynamically or otherwise.</p>
<p>DECLARE_DYNAMIC_CLASS inserts a static <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> declaration into the class, initialized by IMPLEMENT_DYNAMIC_CLASS. When initialized, the <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> object inserts itself into a linked list (accessed through wxClassInfo::first and wxClassInfo::next pointers). The linked list is fully created by the time all global initialisation is done.</p>
<p>IMPLEMENT_DYNAMIC_CLASS is a macro that not only initialises the static <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> member, but defines a global function capable of creating a dynamic object of the class in question. A pointer to this function is stored in <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a>, and is used when an object should be created dynamically.</p>
<p><a class="el" href="classwx_object.html#af40d580385cf4f8112fae7713404b01e" title="Determines whether this class is a subclass of (or the same class as) the given class.">wxObject::IsKindOf</a> uses the linked list of <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a>. It takes a <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> argument, so use CLASSINFO(className) to return an appropriate <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> pointer to use in this function.</p>
<p>The function wxCreateDynamicObject can be used to construct a new object of a given type, by supplying a string name. If you have a pointer to the <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> object instead, then you can simply call <a class="el" href="classwx_class_info.html#a754a267b65cd7e2026e6a0beb22ff0a7" title="Creates an object of the appropriate kind.">wxClassInfo::CreateObject</a>.</p>
<h2><a class="anchor" id="overview_rtti_classinfo"></a>

wxClassInfo</h2>
<p>This class stores meta-information about classes. An application may use macros such as DECLARE_DYNAMIC_CLASS and IMPLEMENT_DYNAMIC_CLASS to record runtime information about a class, including:</p>
<ul>
<li>Its position in the inheritance hierarchy.  </li>
<li>The base class name(s) (up to two base classes are permitted).  </li>
<li>A string representation of the class name.  </li>
<li>A function that can be called to construct an instance of this class.</li>
</ul>
<p>The DECLARE_... macros declare a static <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> variable in a class, which is initialized by macros of the form IMPLEMENT_... in the implementation C++ file. Classes whose instances may be constructed dynamically are given a global constructor function which returns a new object.</p>
<p>You can get the <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> for a class by using the CLASSINFO macro, e.g. CLASSINFO(wxFrame). You can get the <a class="el" href="classwx_class_info.html" title="This class stores meta-information about classes.">wxClassInfo</a> for an object using <a class="el" href="classwx_object.html#ab3a0c6f723cbaddb47be4e8dd98cc8e2" title="This virtual function is redefined for every class that requires run-time type information, when using the wxDECLARE_CLASS macro (or similar).">wxObject::GetClassInfo</a>.</p>
<dl class="see"><dt><b>参照:</b></dt><dd></dd></dl>
<ul>
<li><a class="el" href="classwx_object.html" title="This is the root class of many of the wxWidgets classes.">wxObject</a> </li>
<li>wxCreateDynamicObject</li>
</ul>
<h2><a class="anchor" id="overview_rtti_example"></a>

Example</h2>
<p>In a header file <a class="el" href="frame_8h.html">frame.h</a>:</p>
<div class="fragment"><pre class="fragment"><span class="keyword">class </span><a class="code" href="classwx_frame.html" title="フレームは (通常は) ユーザがサイズや位置を変更可能なウィンドウです。">wxFrame</a> : <span class="keyword">public</span> <a class="code" href="classwx_window.html" title="wxWindow はすべてのウィンドウの基底クラスであり、画面上に表示されるすべての可視オブジェクトを表しています。">wxWindow</a>
{
    DECLARE_DYNAMIC_CLASS(<a class="code" href="classwx_frame.html" title="フレームは (通常は) ユーザがサイズや位置を変更可能なウィンドウです。">wxFrame</a>)

private:
    <a class="code" href="classwx_string.html" title="wxString クラスは wxWidgets 3.0 では完全に書き直されます。そして、この変更が新しいバージョンを wxWidgets 3.0 と呼ぶ主な理由です。">wxString</a> m_title;

public:
...
};
</pre></div><p>In a C++ file frame.cpp:</p>
<div class="fragment"><pre class="fragment">IMPLEMENT_DYNAMIC_CLASS(<a class="code" href="classwx_frame.html" title="フレームは (通常は) ユーザがサイズや位置を変更可能なウィンドウです。">wxFrame</a>, <a class="code" href="classwx_window.html" title="wxWindow はすべてのウィンドウの基底クラスであり、画面上に表示されるすべての可視オブジェクトを表しています。">wxWindow</a>)

<a class="code" href="classwx_frame.html" title="フレームは (通常は) ユーザがサイズや位置を変更可能なウィンドウです。">wxFrame</a>::<a class="code" href="classwx_frame.html" title="フレームは (通常は) ユーザがサイズや位置を変更可能なウィンドウです。">wxFrame</a>()
{
...
}
</pre></div> </div></div><!-- window showing the filter options -->

<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div><!-- iframe showing the search results (closed by default) -->


<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/>
<address class="footer">
	<small>
		
		Page generated on Mon Jul 9 2012 15:04:16 by  <!--[Doxygen 1.7.6+] $generatedby -->
		<a href="http://www.doxygen.org/index.html" target="_new">Doxygen</a> 1.7.4
	
	</small>
</address>


<script src="wxwidgets.js" type="text/javascript"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40693840-1', 'murank.github.io');
  ga('send', 'pageview');

</script>
</body>
</html>
